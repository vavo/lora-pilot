<style>
  .logo-light { display:block; }
  .logo-dark { display:none; }
  :root[data-theme="dark"] .logo-light { display:none !important; }
  :root[data-theme="dark"] .logo-dark { display:block !important; }
  :root[data-theme="light"] .logo-light { display:block !important; }
  :root[data-theme="light"] .logo-dark { display:none !important; }
</style>
<div style="text-align:center; margin-bottom:12px;">
  <img src="/logo-trainpilot.svg" alt="TrainPilot" class="logo-light" style="width:300px; height:auto; margin:0 auto; display:block;">
  <img src="/logodark-trainpilot.svg" alt="TrainPilot" class="logo-dark" style="width:300px; height:auto; margin:0 auto; display:block;">
</div>
<h2 style="margin-top:0;">Train with kohya</h2>
<div class="card">
  <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:12px;">
    <div class="card" style="padding:12px;">
      <h4>1. Choose dataset</h4>
      <div style="margin-top:6px;">
        <select id="tp-dataset" style="width:100%; min-width:260px; padding:12px 14px; border:1px solid var(--border); border-radius:10px; background:var(--card); color:var(--text); font-size:15px;"></select>
        <div style="margin-top:6px;">
          <a href="#" onclick="openDatasets(event)" style="font-size:13px; color:var(--accent); text-decoration:none;">add new dataset</a><br>
        </div>
      </div>
      <label style="margin-top:12px;">Output name (this will be the name of your LoRA epochs)</label>
      <input id="tp-output" type="text" placeholder="output name" style="width:100%; padding:12px 14px; border:1px solid var(--border); border-radius:10px; background:var(--card); color:var(--text); font-size:15px;" />

      <h4 style="margin-top:16px;">2. Choose output quality</h4>
      <select id="tp-profile" style="width:100%; padding:12px 14px; border:1px solid var(--border); border-radius:10px; background:var(--card); color:var(--text); font-size:15px;">
        <option value="quick_test" selected>Quick test (400-600 steps)</option>
        <option value="regular">Normal quality (800-1200 steps)</option>
        <option value="high_quality">High quality (1600-2200 steps)</option>
      </select>
    </div>
  </div>
  <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">
    <button onclick="startTrainPilot()">Start</button>
    <button class="danger" onclick="stopTrainPilot()">Stop</button>
    <span id="tp-status" class="status"></span>
  </div>
  <div class="card" style="margin-top:12px;">
    <h3>TOML Config</h3><br>
    <code>/workspace/apps/TrainPilot/newlora.toml</code><br><br>
    <h3>Logs</h3>
    <pre id="tp-logs" style="max-height:300px; overflow:auto; background:var(--card); color:var(--text); padding:12px; border-radius:8px; border:1px solid var(--border);"></pre>
  </div>
</div>
